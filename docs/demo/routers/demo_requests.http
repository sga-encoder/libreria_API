@host = http://localhost:8000
@token = <YOUR_ACCESS_TOKEN_HERE>

### =============================================================================
### AUTENTICACIÓN
### =============================================================================

### Login (OAuth2 password flow) - Obtener token de acceso
POST {{host}}/api/v1/auth/token
Content-Type: application/x-www-form-urlencoded

username=admin&password=secret

> {%
client.global.set("token", JSON.parse(response.body).access_token);
%}

### =============================================================================
### USUARIOS (Users)
### =============================================================================

### Crear usuario 1
POST {{host}}/user/
Content-Type: application/json

{
  "fullName": "Juan Pérez",
  "email": "juan.perez@example.com",
  "password": "password123"
}

### Crear usuario 2
POST {{host}}/user/
Content-Type: application/json

{
  "fullName": "María García",
  "email": "maria.garcia@example.com",
  "password": "password456"
}

### Crear usuario 3
POST {{host}}/user/
Content-Type: application/json

{
  "fullName": "Carlos López",
  "email": "carlos.lopez@example.com",
  "password": "password789"
}

### Leer usuario por ID (usar ID de usuario creado)
GET {{host}}/user/17647805201590003

### Leer todos los usuarios
GET {{host}}/user/

### Actualizar usuario
PATCH {{host}}/user/17647860658830003
Content-Type: application/json

{
  "email": "juan.nuevo@example.com"
}

### Eliminar usuario
DELETE {{host}}/user/17647805133370001

### =============================================================================
### LIBROS (Books)
### =============================================================================

### Crear libro (requiere autenticación)
POST {{host}}/book/
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "id_IBSN": "978-1234567890",
  "title": "El Gran Libro",
  "author": "Autor Ejemplo",
  "gender": "FICCION",
  "weight": 1.2,
  "price": 19.99,
  "description": "Un libro muy interesante.",
  "frond_page_url": "http://example.com/portada.jpg",
  "is_borrowed": false
}

### Crear libro por ISBN (desde API externa)
POST {{host}}/book/ISBN/9780553897845

### Leer libro por ISBN
GET {{host}}/book/9780553897845

### Leer todos los libros
GET {{host}}/book/

### Actualizar libro (requiere autenticación)
PATCH {{host}}/book/9780553897845
Content-Type: application/json
Authorization: Bearer {{token}}

{
  "title": "El Gran Libro - Edición Revisada"
}

### Eliminar libro (requiere autenticación)
DELETE {{host}}/book/9780553897845
Authorization: Bearer {{token}}

### =============================================================================
### PRÉSTAMOS (Loans)
### =============================================================================

### Crear préstamo
POST {{host}}/loan/
Content-Type: application/json

{
  "user": "1234567890",
  "book": "978-1234567890",
  "loanDate": "2025-12-03T10:00:00Z"
}

### Leer préstamo por ID
GET {{host}}/loan/1

### Leer todos los préstamos
GET {{host}}/loan/

### Actualizar préstamo
PATCH {{host}}/loan/1
Content-Type: application/json

{
  "loanDate": "2025-12-04T10:00:00Z"
}

### Eliminar préstamo
DELETE {{host}}/loan/1
